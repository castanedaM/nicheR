% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/sample_data.R
\name{sample_data}
\alias{sample_data}
\title{Sample Occurrence Locations from Predicted Niche Outputs}
\usage{
sample_data(
  n_occ,
  suitable_environment = NULL,
  method = c("distance", "suitability"),
  truncated = TRUE,
  bias_surface = NULL,
  bias_dir = 1,
  seed = NULL,
  verbose = TRUE,
  sampling_mask = NULL
)
}
\arguments{
\item{n_occ}{Integer. Number of occurrence points to sample.}

\item{suitable_environment}{A \code{terra::SpatRaster} or \code{data.frame}
containing prediction outputs from \code{predict()}.
Must include coordinate columns (\code{x}, \code{y}) or longitude/latitude
variants (e.g., \code{lon}, \code{lat}, \code{longitude}, \code{latitude}).}

\item{method}{Character. One of \code{"distance"} or \code{"suitability"}.}

\item{truncated}{Logical. If \code{TRUE} (default), sampling is restricted
to environmentally suitable cells when truncated layers
(\code{Mahalanobis_trunc} or \code{suitability_trunc}) are available.
If \code{FALSE}, sampling is performed across all finite prediction values.}

\item{bias_surface}{Optional. A \code{SpatRaster} or a list of
\code{SpatRaster} objects used to weight sampling probabilities. When
provided, bias layers are processed with \code{\link{apply_bias}} and the
pooled bias surface is multiplied with the sampling weights.}

\item{bias_dir}{Numeric vector of \code{1} (use layer as-is) or \code{-1}
(invert via \eqn{1 - x}). A single value is recycled to match the number of
bias layers.}

\item{seed}{Optional integer. If provided, sets the random seed for
reproducibility.}

\item{verbose}{Logical. If \code{TRUE}, prints progress messages.}

\item{sampling}{Character. One of \code{"random"}, \code{"center"}, or
\code{"edge"}.}
}
\value{
A \code{data.frame} containing sampled geographic coordinates (\code{x}, \code{y}).
The returned object also includes attributes describing the sampling run:
\code{n_occ}, \code{sampling}, \code{method}, \code{truncated}, and
\code{coord_names}.
}
\description{
Samples occurrence points from predicted niche outputs generated by
\code{\link{predict.nicheR_ellipsoid}}. Sampling can be performed using either
Mahalanobis distance or suitability values, with options to emphasize
niche center, niche edge, or uniform random selection.
}
\details{
The function operates on predicted outputs in geographic space (G-space),
but sampling weights are determined by environmental suitability or
Mahalanobis distance in environmental space (E-space).


The input \code{suitable_environment} must contain prediction outputs from
\code{predict()}, including:

\itemize{
  \item \code{Mahalanobis} (squared Mahalanobis distance), and optionally
  \code{Mahalanobis_trunc}
  \item \code{suitability}, and optionally \code{suitability_trunc}
}

Sampling behavior depends on \code{method} and \code{sampling}:

\strong{method = "distance"}
\itemize{
  \item center: favors small Mahalanobis distance (niche core)
  \item edge: favors large Mahalanobis distance (near ellipsoid boundary)
  \item random: uniform sampling
}

\strong{method = "suitability"}
\itemize{
  \item center: favors high suitability values
  \item edge: favors low suitability values (but still > 0)
  \item random: uniform sampling
}
}
\examples{
\dontrun{
pred <- predict(ell,
                newdata = bios,
                include_mahalanobis = TRUE,
                include_suitability = TRUE,
                suitability_truncated = TRUE)

occ <- sample_data(n_occ = 100,
                   suitable_environment = pred,
                   sampling = "center",
                   method = "suitability",
                   seed = 42)
}

}
\seealso{
\code{\link{predict.nicheR_ellipsoid}},
\code{\link{apply_bias}}
}

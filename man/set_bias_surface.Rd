% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/set_bias_surface.R
\name{set_bias_surface}
\alias{set_bias_surface}
\title{This function applies one or more bias surfaces (sampling probability layers) to an
ecological suitability layer to determine the final realized suitability.}
\usage{
set_bias_surface(
  bias_surface,
  ecological_suitability = NULL,
  bias_direction = 1,
  raster_resolution = 0.5,
  output = "default"
)
}
\arguments{
\item{bias_surface}{A single bias layer or a collection of bias layers. This can be:
\itemize{
  \item A \code{terra::SpatRaster} (single layer or stack).
  \item A \code{terra::SpatVector} (which will be rasterized).
  \item A path to a single raster/vector file.
  \item A \code{list} of any of the above (paths, SpatRasters, SpatVectors).
}
Values should ideally be scaled from 0 to 1.}

\item{ecological_suitability}{Optional. A \code{terra::SpatRaster} (values 0/1) representing the
ecological suitability layer. If \code{NULL} (default), the function returns only the
\strong{Pooled Bias Surface}.}

\item{bias_direction}{Numeric vector. Defines the directionality for each bias layer.
\itemize{
  \item \code{1} (or \code{-1}) applies to all layers if a single value is provided.
  \item A vector (e.g., \code{c(1, -1, 1)}) must match the number of \code{bias_surface} layers.
}
A value of \code{1} indicates higher raw layer values mean higher bias. A value of \code{-1}
indicates higher raw layer values mean \strong{lower} bias (applying the $1 - \text{layer}$ reversal).}

\item{raster_resolution}{Numeric. The resolution to use when rasterizing vector inputs
or creating a template if no \code{ecological_suitability} raster is provided. Defaults to 0.5.}

\item{output}{Character string, controlling the returned layers.
\itemize{
  \item \code{"default"} (or \code{NULL}): Returns the \code{final_suitability} (or Pooled Bias) and the \code{pooled_bias} layer.
  \item \code{"all"}: Returns all layers: \code{final_suitability} (or Pooled Bias), \code{pooled_bias}, and the stack of \code{directional_bias_stack}.
}}
}
\value{
A list of class \code{biased_suitable_env} containing:
  \item{pooled_bias_sp}{The pooled (multiplied) and standardized bias layer (\code{SpatRaster}).}
  \item{pooled_bias_df}{Data frame of coordinates/values for non-zero cells of \code{pooled_bias_sp}.}
  \item{final_suitability_sp}{*Only when \code{ecological_suitability} is provided.* The final \code{terra::SpatRaster} result (Niche * Pooled Bias).}
  \item{final_suitability_df}{*Only when \code{ecological_suitability} is provided.* Data frame of coordinates/values for non-zero cells of \code{final_suitability_sp}.}
  \item{directional_bias_stack}{*Only with \code{output="all"}.* \code{SpatRaster} stack of all individual, standardized, and direction-corrected bias layers.}
  \item{directional_bias_df}{*Only with \code{output="all"}.* Data frame of coordinates/values for non-zero cells of \code{directional_bias_stack}.}
  \item{combination_formula}{*Internal*: A string detailing how the layers were combined.}
  \item{is_niche_applied}{*Internal*: Boolean indicating if \code{ecological_suitability} was used.}
}
\description{
It handles multiple bias inputs, aligns them to a common template, standardizes them
individually, applies user-defined directionality (e.g., $1 - \text{layer}$), and
multiplies them together before applying the pooled bias to the ecological suitability.
}
\concept{niche functions}

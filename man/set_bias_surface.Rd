% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/set_bias_surface.R
\name{set_bias_surface}
\alias{set_bias_surface}
\title{Combine one or more bias surfaces into a pooled bias raster}
\usage{
set_bias_surface(
  bias_surface,
  bias_dir = 1,
  suitable_env = NULL,
  out.bias = c("biased", "standardized", "both"),
  verbose = TRUE
)
}
\arguments{
\item{bias_surface}{One or more bias layers which must be:
\itemize{
  \item a \code{terra::SpatRaster} (single or multi-layer), or
  \item a \code{list} of \code{terra::SpatRaster} objects.
}
Any multi-layer \code{SpatRaster} is internally split into single-layer
rasters before standardization.}

\item{bias_dir}{Numeric values of \code{1} or \code{-1} controlling
directionality. A length 1 value is recycled across all layers. A value
of \code{-1} applies \code{1 - layer} after scaling to \eqn{[0, 1]}.}

\item{suitable_env}{Optional \code{terra::SpatRaster} used as a mask and
template. Typically this is a binary or continuous suitability raster.
Masking is applied after standardization so that bias is only defined
where the species is suitable. Required when \code{out.bias} is
\code{"biased"} or \code{"both"}.}

\item{out.bias}{Character, one of \code{"biased"}, \code{"standardized"},
or \code{"both"}:
\itemize{
  \item \code{"standardized"}: returns only the standardized,
    direction-adjusted bias stack.
  \item \code{"biased"}: returns only the pooled bias surface, masked by
    \code{suitable_env}. Requires \code{suitable_env}.
  \item \code{"both"}: returns both the pooled bias surface and the
    standardized stack. Requires \code{suitable_env}.
}}

\item{verbose}{Logical. If \code{TRUE}, prints progress messages.}
}
\value{
A list of class \code{"nicheR_bias_surface"} containing some or all
  of:
  \item{pooled_bias_sp}{Pooled bias raster (scaled 0â€“1; \code{SpatRaster}),
        masked by \code{suitable_env} when supplied. Present only when
        \code{out.bias} is \code{"biased"} or \code{"both"}.}
  \item{directional_bias_stack}{Stack of standardized, direction-corrected
        bias layers (\code{SpatRaster}). Present only when
        \code{out.bias} is \code{"standardized"} or \code{"both"}.}
  \item{combination_formula}{String describing how layers were combined
        (e.g., \code{"bias_1 * (1-bias_2)"}).}
}
\description{
This helper function combines one or more sampling bias layers into a single
pooled bias surface. Each bias layer is:
\itemize{
  \item aligned to a common template grid,
  \item scaled to \eqn{[0, 1]},
  \item optionally reversed via \eqn{1 - x},
  \item multiplied with other bias layers to form a pooled bias surface.
}
}
\details{
The resulting pooled bias raster can then be used elsewhere in NicheR to
modulate sampling or suitability. Optionally, the function can also return
the standardized bias layers as a raster stack.
}
